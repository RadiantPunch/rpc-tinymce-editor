jQuery,tinymce.PluginManager.add("rpc_tinymce_details",function(i,t){i.addButton("details",{title:"Details",image:t+"/icons/details.svg",cmd:"detailsCmd"}),i.addCommand("detailsCmd",function(){var t=i.selection.getContent({format:"text"}),e=i.windowManager.open({title:"Details",width:600,height:250,body:[{type:"textbox",name:"detailsSummary",label:"Summary",value:t,multiline:!0,minHeight:50},{type:"textbox",name:"detailsContent",label:"Details",multiline:!0,minHeight:150}],buttons:[{text:"Ok",subtype:"primary",onclick:function(){e.submit()}},{text:"Cancel",onclick:"close"}],onsubmit:function(t){var e=t.data.detailsSummary,a="<p>"+t.data.detailsContent+"</p>";if(!(0<e.length&&0<a.length))return i.windowManager.alert("All fields are required."),void t.preventDefault();var n='<p class="scode no-edit first">[details]</p><p class="br-only dsummary"><span class="scode no-edit">[dsummary]</span>'+e+'<span class="scode no-edit">[/dsummary]</span></p>'+a+'<p class="scode no-edit last">[/details]</p>';i.insertContent(n)}})})});