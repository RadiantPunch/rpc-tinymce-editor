!function(e){tinymce.PluginManager.add("rpc_tinymce_abbr",function(r,t){r.on("init",function(t){r.formatter.register("abbr_format",{inline:"abbr"}),r.formatter.register("abbr_format_remove",{inline:"abbr",attributes:{title:"remove-me"}})}),r.addButton("abbr",{title:"Abbreviation",image:t+"/icons/abbr.svg",onclick:function(){e(r.selection.getNode()).is("abbr")?(r.formatter.apply("abbr_format_remove"),r.formatter.remove("abbr_format_remove")):r.execCommand("abbrCmd")},onpostrender:function(){var e=this;r.on("init",function(){r.formatter.formatChanged("abbr_format",function(t){e.active(t)})})}}),r.addCommand("abbrCmd",function(){var n=r.selection.getContent({format:"html"}),t=r.windowManager.open({title:"Abbreviation",body:[{type:"textbox",name:"abbrTitle",label:"Abbreviation Meaning (Optional)"}],buttons:[{text:"Ok",subtype:"primary",onclick:function(){t.submit()}},{text:"Cancel",onclick:"close"}],onsubmit:function(t){var e=t.data.abbrTitle;if(0<e.length){var a="<abbr"+(e=' title="'+e+'"')+">"+n+"</abbr>";r.execCommand("mceReplaceContent",!1,a)}else r.formatter.apply("abbr_format")}})})})}(jQuery);