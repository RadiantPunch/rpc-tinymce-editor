!function(e){tinymce.PluginManager.add("rpc_tinymce_abbr",function(n,t){n.on("init",function(t){n.formatter.register("abbr_format",{inline:"abbr"}),n.formatter.register("abbr_format_remove",{inline:"abbr",attributes:{title:"remove-me"}})}),n.addButton("abbr",{title:"Abbreviation",image:t+"/abbr.svg",onclick:function(){e(n.selection.getNode()).is("abbr")?(n.formatter.apply("abbr_format_remove"),n.formatter.remove("abbr_format_remove")):n.execCommand("abbrCmd")},onpostrender:function(){var e=this;n.on("init",function(){n.formatter.formatChanged("abbr_format",function(t){e.active(t)})})}}),n.addCommand("abbrCmd",function(){var r=n.selection.getContent({format:"html"}),t=n.windowManager.open({title:"Abbreviation",body:[{type:"textbox",name:"abbrTitle",label:"Abbreviation Meaning (Optional)"}],buttons:[{text:"Ok",subtype:"primary",onclick:function(){t.submit()}},{text:"Cancel",onclick:"close"}],onsubmit:function(t){var e=t.data.abbrTitle;if(0<e.length){var a="<abbr"+(e=' title="'+e+'"')+">"+r+"</abbr>";n.execCommand("mceReplaceContent",!1,a)}else n.formatter.apply("abbr_format")}})})})}(jQuery);