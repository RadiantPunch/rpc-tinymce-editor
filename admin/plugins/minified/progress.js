!function(d){tinymce.PluginManager.add("rpc_tinymce_progress",function(c,e){c.addButton("progress",{title:"Progress",image:e+"/icons/progress.svg",cmd:"progressCmd"}),c.addCommand("progressCmd",function(){var p=c.selection.getContent({format:"text"}),e=c.windowManager.open({title:"Progress",body:[{type:"textbox",name:"progressMax",label:"Maximum"},{type:"textbox",name:"progressValue",label:"Progress Value"}],buttons:[{text:"Ok",subtype:"primary",onclick:function(){e.submit()}},{text:"Cancel",onclick:"close"}],onsubmit:function(t){var e=t.data.progressMax,r=t.data.progressValue,n="",s="",a=!1,o=!1,u=!1,i=c.windowManager;function l(e){for(var t=0,r=0;r<e.length;r++){t+=e[r].length}return 0!==t}function m(e){return!!d.isNumeric(e)||(i.alert("Please input numbers only."),t.preventDefault(),!1)}function g(e){return 0!==(e=Number(e))||(i.alert("Inputs must be greater than 0."),t.preventDefault(),!1)}if(l([e,r])){if(l(e)&&m(e)){if(!g(e))return;e=Number(e),a=!0}if(l(r)&&m(r)){if(!g(r))return;r=Number(r),o=!0}if(a&&o){if(!(r<=e))return i.alert("The Progress Value must be between 0 and the Maximum."),void t.preventDefault();u=!0}else if(o){if(!(r<=1))return i.alert("If no Maximum is set, the Progess Value must be between 0 and 1."),void t.preventDefault();u=!0}else u=!0}else u=!0;if(u){a&&(n=' max="'+e+'"'),o&&(s=' value="'+r+'"');var f="<progress"+n+s+">"+p+"</progress>";c.insertContent(f)}}})})})}(jQuery);